<!DOCTYPE html>
<html class="no-js" lang="en" xml:lang="en"><!--<![endif]-->
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="description" content="{$Think.config.DEFAULT_WEB_DESCRIPTION}">
	<meta name="keywords" content="{$Think.config.DEFAULT_WEB_KEYWORDS}" />
    <link rel="shortcut icon" href="__PUBLIC__/Public/images/favicon.ico">
	<link rel="icon" href="__PUBLIC__/Public/images/favicon.ico" type="image/x-icon">
	<title>{$Think.config.DEFAULT_WEB_TITLE}</title>
	<!-- Main styles -->
	<link rel="stylesheet" href="__PUBLIC__/Home/Css/bootstrap.min.css">
	<link rel="stylesheet" href="__PUBLIC__/Home/Css/backoffice_css.css">
	<!-- Font Awesome icons -->
	<link rel="stylesheet" href="__PUBLIC__/Home/Css/font-awesome.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
		<script src="__PUBLIC__/Home/Js/html5shiv.js"></script>
		<script src="__PUBLIC__/Home/Js/respond.min.js"></script>
	<![endif]-->

</head>

<body data-spy="scroll" data-target=".navbar" data-offset="50" onkeydown="keyLogin();">

<!-- MAIN CONTENT -->
<div class="container" style="margin-top:50px;">
	<div class="row">
		<div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3">
			<div class="well no-padding text-left">
				<form name="login-form" class="smart-form client-form" action="{:U('Home/Index/login')}" method="post" >
					<header>            
					   <h2>{$Think.lang.login}</h2>
					</header>
					<fieldset>		
						<section>
							<label class="label">{$Think.lang.login-username}</label>
							<label class="input"> <i class="icon-append fa fa-user"></i>
								<input type="text" name="username" id="username" value="">
								<b class="tooltip tooltip-top-right"><i class="fa fa-user txt-color-teal"></i>&nbsp;&nbsp;{$Think.lang.login-message-username}</b></label>
						</section>
						<section>
							<label class="label">{$Think.lang.login-userpass}</label>
							<label class="input"> <i class="icon-append fa fa-globe"></i>
								<input type="password" name="userpass" id="password" value="">
								<b class="tooltip tooltip-top-right"><i class="fa fa-lock txt-color-teal"></i>&nbsp;&nbsp;{$Think.lang.login-message-pass}</b> </label>
						</section>
						<section>
							<label class="label">{$Think.lang.login-language}</label>
							<label class="select">
							<select name="language" id="lang" class="valid">
								<option value="">--Language Select--</option>
								<option value="en-us" <eq name="language" value="en-us">selected="selected"</eq> >English</option>
								<option value="ko-kr" <eq name="language" value="ko-kr">selected="selected"</eq> >한국어</option>
								<option value="zh-cn" <eq name="language" value="zh-cn">selected="selected"</eq> >中文</option>
								<option value="ja-jp" <eq name="language" value="ja-jp">selected="selected"</eq> >日本語</option>
							</select> <i></i> 
							</label>                                     
							<div class="note">
								<a href="#password_find" role="button" class="btn btn-primary btn-xs" data-toggle="modal" data-remote-target="#password_find .modal-content">{$Think.lang.login-find}</a>
							</div>
						</section>
						  
						<section>
							<label class="checkbox">
								<input type="checkbox" name="auto_login" id="auto_login">
								<i></i>{$Think.lang.login-memory}</label>
						</section>
					</fieldset>
					<footer style="background:none;">
						<input type="button" class="btn btn-default" value="{$Think.lang.login-out}">
						<input type="button" class="btn btn-primary" value="{$Think.lang.login-in}" id="login_form">
					</footer>
					
				</form>

			</div>
			<p class="font-xs margin-top-5">
						  2015 © <a href="{:U('Home/Index/index',array('language'=>$language))}">LIMINCOIN</a>. All Rights Reserved.
			</p>										
		</div>					
	</div><!--.row-->                            
</div>
<!-- main VIEW -->
<div class="modal fade" id="password_find" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
	<div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                 <h3 class="modal-title">{$Think.lang.login-find-title}</h3>
            </div>
            <!-- /modal-header -->
            <div class="modal-body">
			   <form name="addForm" action="{:U('Home/Index/repass',array('language'=>$language))}"  method="post" class="smart-form client-form" novalidate="novalidate">
			     <header style="background:none; display:none;">
				   <h4 id="result_pass"></h4>
				 </header>
				  <fieldset>
					  <section>
							 <label class="label">{$Think.lang.login-find-username}</label>
							 <label class="input"><i class="icon-prepend fa fa-user"></i><i class="icon-append fa fa-check"></i>
							 <input type="text" name="user_name" id="user_name" value="">
							 </label>
					  </section>
					  <section>
							 <label class="label">{$Think.lang.login-find-email}</label>
							 <label class="input"><i class="icon-prepend fa fa-envelope-o"></i><i class="icon-append fa fa-check"></i>
							 <input type="text" name="user_email" id="user_email" value="">
							 </label>
					  </section>

					  <div class="row">
					<section class="col col-9">
						<label class="label">{$Think.lang.login-find-code}</label>
						<label class="input">
							<input type="text" class="input-sm" id="code" name="code" value="">
						</label>
					</section>

					<section class="col col-3">
						<label class="label">{$Think.lang.login-find-code-send}</label>
						<label class="input">
						<button class="btn btn-default btn-sm sendcode" type="button" type_id="5" style="width:50px;">{$Think.lang.login-find-code-one}</button>&nbsp;<button class="btn btn-default btn-sm sendcode" type="button" type_id="5" style="width:50px;">{$Think.lang.login-find-code-two}</button>
						</label>
					</section>
					</div>
				  </fieldset>
				  <footer style="background:none;">
					   <input type="submit" value="{$Think.lang.login-find-in}" id="sumbit" class="btn btn-primary">
					   <input type="button" class="btn btn-default" data-dismiss="modal" value="{$Think.lang.login-find-out}">
				  </footer>
                 </form>
            </div><!-- /modal-body -->
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.main VIEW -->
<script src="__PUBLIC__/Home/Js/jquery-1.10.2-min.js"></script>
<script src="__PUBLIC__/Home/Js/bootstrap.min.js"></script>
<script src="__PUBLIC__/Home/Js/jquery.validate.min.js"></script>
<script>
	function keyLogin()
	{
		if (event.keyCode == 13)
		{
			event.returnValue=false;
			event.cancel = true;
			$("#login_form").click();
		}
	}
</script>
<script>
	$(document).ready(function(){
		$("#sumbit").focus();
		$("#login_form").click(function(){
			$(".msg").remove();
			$("#username").parent().parent().find("label").removeClass("state-error");
			$("#password").parent().parent().find("label").removeClass("state-error");
			if($("#username").val()==""||$("#password").val()==""){
				if($("#username").val()==""){
					$("#username").parent().parent().find("label").addClass("state-error");
					$("#username").parent().after("<em  class='msg'>Please enter the ID</em>");
				}
				if($("#password").val()==""){
					$("#password").parent().parent().find("label").addClass("state-error");
					$("#password").parent().after("<em  class='msg'>Please enter the password.</em>");
				}
				return false;
			}
			$.post("{:U('Home/Ajax/login')}",{"username":$("#username").val(),"userpass":$("#password").val()},function(data){
				if(data["result"]){
					alert(data["message"]);
					$("form[name='login-form']").submit();
				}else{
					alert(data["message"]);
				}
			});
		});
		$(".sendcode").click(function(){

			$("#user_email").parent().parent().find("label").removeClass("state-error");
			$("#user_name").parent().parent().find("label").removeClass("state-error");
			$(".msg").remove();
			if($("#user_name").val()==""){
				$("#user_name").parent().parent().find("label").addClass("state-error");
				$("#user_name").parent().after("<em  class='msg'>用户名不能为空</em>");
				return false;
			}
			if($("#user_email").val()==""){
				$("#user_email").parent().parent().find("label").addClass("state-error");
				$("#user_email").parent().after("<em  class='msg'>用户邮箱不能为空</em>");
				return false;
			}
			var search_str = /^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,3}$/ig;
			var email_val = $("#user_email").val();
			if(!search_str.test(email_val)){
				$("#user_email").parent().parent().find("label").addClass("state-error");
				$("#user_email").parent().after("<em  class='msg'>邮箱不符合要求</em>");
				return false;
			}
			$(this).attr("disabled",true);
			$.post("{:U('Home/Index/send_email')}",{"type":$(this).attr("type_id"),"user_email":$("#user_email").val(),"user_name":$("#user_name").val()},function(data){
				if(data){
					alert("发送成功");
				}else{
					alert("发送失败");
				}
				$(".sendcode").attr("disabled",false);
			});
		});
		$("#lang").change(function(){
			var type = $(this).val();
			if(type=='en-us'){
				location.href= "{:U('Home/Index/login',array('language'=>'en-us'))}";
			}else if(type=='ko-kr'){
				location.href= "{:U('Home/Index/login',array('language'=>'ko-kr'))}";
			}else if(type=='zh-cn'){
				location.href= "{:U('Home/Index/login',array('language'=>'zh-cn'))}";
			}else if(type=='ja-jp'){
				location.href= "{:U('Home/Index/login',array('language'=>'ja-jp'))}";
			}
		});
	});
</script>
</body>
</html>